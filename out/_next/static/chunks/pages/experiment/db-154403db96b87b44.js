(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[866],{6460:function(n,e,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/experiment/db",function(){return o(7781)}])},7781:function(n,e,o){"use strict";o.r(e),o.d(e,{default:function(){return f}});var r,t=o(4776),c=o.n(t),s=o(2322),u=o(2784),i=o(5759);function a(n,e,o,r,t,c,s){try{var u=n[c](s),i=u.value}catch(a){return void o(a)}u.done?e(i):Promise.resolve(i).then(r,t)}function d(n){return function(){var e=this,o=arguments;return new Promise((function(r,t){var c=n.apply(e,o);function s(n){a(c,r,t,s,u,"next",n)}function u(n){a(c,r,t,s,u,"throw",n)}s(void 0)}))}}function f(){var n,e,o=function(){var e=d(c().mark((function e(){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=window.indexedDB.open("testDB",2)).onupgradeneeded=function(n){console.log("onupgradeneeded",n);var e=n.target.result,o=e.createObjectStore("words",{keyPath:"word"});o.createIndex("wordIndex","word",{unique:!0}),console.log("add \ud83d\udfe9\ud83d\udfe9\ud83d\udfe9"),o.transaction.oncomplete=function(n){for(var o=e.transaction("words","readwrite").objectStore("words"),r=0;r<5;r++)o.add({word:r.toString(36),index:r,time:Date.now()})}},o.onerror=function(n){console.log("request.onerror",n)},o.onsuccess=function(e){console.log("onsuccess",e),(n=e.target.result).onerror=function(n){return console.log("db.onerror",n)}};case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var n=d(c().mark((function n(){var o;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(o=indexedDB.open("keygen",1)).onupgradeneeded=function(n){for(var e=n.target.result.createObjectStore("words",{autoIncrement:!0}),o=0;o<5;o++)e.add(o.toString(26))},o.onsuccess=function(n){(e=n.target.result).onerror=console.error};case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,u.useEffect)((function(){r=new i.SX,o(),t()}),[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:function(){var e=n.transaction("words","readwrite");e.oncomplete=function(n){return console.log("transaction complete: ",n)},e.objectStore("words").add({word:"a",index:8,time:Date.now()}).onsuccess=function(n){console.log("request success",n)}},children:"path key db add"}),(0,s.jsx)("button",{onClick:function(){e.transaction("words","readwrite").objectStore("words").add(Date.now().toString(36)).onsuccess=console.log},children:"gen key add"})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{onClick:function(){r.push({href:"https://aaa.com",icon:"",title:"",description:""})},children:"Push"})})]})}}},function(n){n.O(0,[759,774,888,179],(function(){return e=6460,n(n.s=e);var e}));var e=n.O();_N_E=e}]);