(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{2165:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/start",function(){return r(6810)}])},2661:function(e,n,r){"use strict";r.d(n,{AC:function(){return S},qg:function(){return d}});var t=r(2322),a=r(2784),o=r(9097),i=r(6988),c=r.n(i),s=r(5801),l=r(6163),u="/logo_gray.png";function d(e){var n=e.data;n||(n={});return(0,t.jsx)(o.default,{href:"/reading?url="+encodeURIComponent(n.href||""),"data-url":n.url,children:(0,t.jsxs)("div",{className:c()["wrp-card-wrapper"],children:[(0,t.jsx)("div",{className:"".concat(c().ellipsis," ").concat(c().title),children:n.title}),(0,t.jsx)("div",{className:"".concat(c()["image-wrapper"]),children:(0,t.jsx)("img",{decoding:"async",loading:"lazy",referrerPolicy:"no-referrer",className:c().image,src:n.icon||u,onError:function(e){var n=e.target;"true"!==n.dataset.fallback&&(n.dataset.fallback="true",n.src=u)},alt:"website logo icon."})}),(0,t.jsx)("div",{className:c().description,children:n.des||n.description}),e.delete&&(0,t.jsx)(s.Z,{className:c().delete,onClick:function(r){r.preventDefault(),e.onDelete&&n.key&&e.onDelete(n.key)},"aria-label":"delete",size:"large",color:"warning",children:(0,t.jsx)(l.Z,{fontSize:"inherit"})})]})})}var p=r(5632);function _(){return(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"200",height:"200",fill:"var(--c-dark)",children:(0,t.jsx)("path",{d:"M512 0a512 512 0 0 0-512 512 512 512 0 0 0 512 512 512 512 0 0 0 512-512 512 512 0 0 0-512-512z m241.005714 703.268571a32.182857 32.182857 0 0 1 0.512 45.348572 32.182857 32.182857 0 0 1-45.348571 0.512L512 556.763429 315.830857 748.982857a31.963429 31.963429 0 1 1-44.836571-45.787428L466.285714 512l-195.291428-191.268571a32.182857 32.182857 0 0 1-0.512-45.348572 32.182857 32.182857 0 0 1 45.348571-0.512L512 467.236571 708.169143 275.017143a31.963429 31.963429 0 1 1 44.836571 45.787428L557.714286 512l195.291428 191.268571z","p-id":"10064"})})}var f=r(72),g=r(2679),m=r(9855),h=r.n(m);function v(e){var n=e.onClose,r=e.onResult,o=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e,n=!0,t=new f.BrowserQRCodeReader;return o.current&&t.decodeFromVideoDevice("",o.current,(function(e,n,t){e&&r&&r(e.getText())})).then((function(r){n?e=r:r.stop()})),function(){n=!1,e&&e.stop()}}),[]),(0,t.jsx)("div",{className:h()["scaner-wrapper"],children:(0,t.jsxs)("div",{className:h()["scaner-container"],children:[(0,t.jsx)("video",{ref:o}),(0,t.jsx)(s.Z,{size:"large",className:h().close,"aria-label":"close & back",onClick:n,children:(0,t.jsx)(g.Z,{fontSize:"large"})})]})})}var x=r(2779),j=r.n(x),w=r(7767),b=r(9206),N=r(4980),C=r(4436),k=r.n(C);function R(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function S(){var e,n=(0,a.useState)(""),r=n[0],o=n[1],i=(0,a.useState)(!1),c=i[0],s=i[1],l=(0,a.useState)(!1),u=l[0],d=l[1],f=(0,a.useState)(!1),g=f[0],m=f[1],h=(0,a.useRef)(null),x=(0,p.useRouter)(),C=function(){return/^https?:\/\//.test(r)?x.push("/reading?url="+encodeURIComponent(r)):/(\w+\.){1,2}((net)|(com)|(cn)|(hk)|(us)|(uk)|(app)|(org)|(edu)|(gov)|(dev))$/.test(r)?x.push("/reading?url="+encodeURIComponent("https://".concat(r))):void d(!0)};return(0,t.jsxs)("div",{className:k()["input-container"],children:[(0,t.jsxs)("div",{className:j()(k()["input-bar"],(e={},R(e,k().focused,c),R(e,k().invalid,u),e)),children:[(0,t.jsx)(b.Z,{className:k()["scanner-button"],onClick:function(){return m(!0)},children:(0,t.jsx)(w.Z,{fontSize:"small"})}),(0,t.jsx)("input",{ref:h,id:"go-input",name:"go-input",inputMode:"url",autoComplete:"off",contentEditable:"true",onChange:function(e){o(e.currentTarget.value),u&&d(!1)},onKeyUp:function(e){switch(console.log("keyup: ",e),e.key){case"Escape":var n;s(!1),null===(n=h.current)||void 0===n||n.blur();break;case"Enter":C()}},onPaste:function(e){e.preventDefault(),e.stopPropagation();var n=e.clipboardData.getData("text/plain");o(n)},onSubmit:C,onFocus:function(){return s(!0)},onBlur:function(){return s(!1)},type:"text",placeholder:"\u8f93\u5165\u7f51\u5740/\u94fe\u63a5",value:r}),r&&(0,t.jsx)("label",{className:j()(k()["clear-button"]),htmlFor:"go-input",onClick:function(){var e;o(""),null===(e=h.current)||void 0===e||e.focus()},children:(0,t.jsx)(_,{})}),(0,t.jsx)("div",{className:k()["go-button"],onClick:C,children:(0,t.jsx)(N.Z,{})}),u&&(0,t.jsx)("label",{className:k().error,htmlFor:"go-input",children:"\u8bf7\u8f93\u5165\u7f51\u5740/\u94fe\u63a5"})]}),g&&(0,t.jsx)(v,{onResult:function(e){/^https?:\/\//.test(e)&&(x.push("/reading?url="+encodeURIComponent(e)),m(!1),navigator.vibrate(50))},onClose:function(){return m(!1)}})]})}},6810:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return u}});var t=r(2322),a=r(2784),o=r(5632),i=r(5759),c=r(2661),s=r(8767),l=r.n(s);function u(){var e=(0,o.useRouter)(),n=(0,a.useRef)(new i.wc),r=(0,a.useState)(!1),s=r[0],u=r[1],d=(0,a.useState)([]),p=d[0],_=d[1];(0,a.useEffect)((function(){n.current.get(200).then((function(e){console.log("list",e),_(e)}))}),[]),(0,a.useEffect)((function(){return function(){s&&u(!1)}}),[e.route]);var f=function(e){var r;null===(r=n.current)||void 0===r||r.delete(e),_(p.filter((function(n){return n.key!==e})))};return(0,t.jsxs)("div",{className:l()["home-page"],children:[(0,t.jsxs)("div",{className:l()["logo-container"],children:[(0,t.jsx)("div",{className:l()["logo-image-wrapper"],children:(0,t.jsx)("img",{width:80,height:80,src:"/logo.png",alt:"Deep Reading Logo."})}),(0,t.jsx)("h1",{className:l()["logo-name"],style:{display:"none"},children:"Deep Reading"})]}),(0,t.jsx)(c.AC,{}),(0,t.jsx)("div",{className:l()["card-container"],onContextMenu:function(e){e.preventDefault(),u(!s)},children:p.map((function(e,n){return(0,t.jsx)(c.qg,{data:e,delete:s,onDelete:f},e.key)}))}),(0,t.jsx)("div",{})]})}},4436:function(e){e.exports={"input-container":"goBar_input-container__EFzI8","input-bar":"goBar_input-bar__TVx01",focused:"goBar_focused__t9RHJ",invalid:"goBar_invalid__MUe4u",headShake:"goBar_headShake__K1WFY","scanner-button":"goBar_scanner-button__AFe8n","clear-button":"goBar_clear-button__AkNrd","go-button":"goBar_go-button__jidER",error:"goBar_error__gicw9"}},6988:function(e){e.exports={"wrp-card-wrapper":"itemCard_wrp-card-wrapper__JJc3A","image-wrapper":"itemCard_image-wrapper__Czejj",image:"itemCard_image__Sc_Dc",ellipsis:"itemCard_ellipsis__YeUnQ",title:"itemCard_title__dWcN3",description:"itemCard_description___Ffjd",delete:"itemCard_delete__UayEh"}},9855:function(e){e.exports={"scaner-wrapper":"qrScanner_scaner-wrapper__ZICUo","scaner-container":"qrScanner_scaner-container__taL00",close:"qrScanner_close__tu2N1"}},8767:function(e){e.exports={"home-page":"start_home-page__A_0_4","logo-container":"start_logo-container__o7604","logo-image-wrapper":"start_logo-image-wrapper__cYN_l","logo-name":"start_logo-name__k383i","card-container":"start_card-container__qSZDH"}}},function(e){e.O(0,[16,759,774,888,179],(function(){return n=2165,e(e.s=n);var n}));var n=e.O();_N_E=n}]);